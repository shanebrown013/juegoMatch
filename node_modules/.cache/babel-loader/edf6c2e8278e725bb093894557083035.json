{"ast":null,"code":"import _slicedToArray from\"/Users/shanebrown/CSCE315/Project3_Juego/juego/juego/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// import React from \"react\";\nimport React,{useState,useEffect,useMemo,useRef}from\"react\";import\"./Statsview.css\";import{database}from\"./firebase\";import PersonIcon from'@material-ui/icons/Person';import ForumIcon from\"@material-ui/icons/Forum\";import IconButton from\"@material-ui/core/IconButton\";import ArrowBackIosIcon from\"@material-ui/icons/ArrowBackIos\";import{Link,useHistory,useParams}from\"react-router-dom\";import{People}from\"@material-ui/icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";console.log('starting script');var O_mostPlayed;var O_winRatio;var O_compED;var O_avgE;var A_compRank;var A_arenaRank;var A_level;var A_kills;var C_wins;var C_losses;var C_winRate;function Statsview(_ref){var backButton=_ref.backButton;// getting api info from our db\nvar urlParams=new URLSearchParams(window.location.search);var name=urlParams.get('name');var chessName=urlParams.get('chess');var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),game1=_useState2[0],setgame1=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),game2=_useState4[0],setgame2=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),game3=_useState6[0],setgame3=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),O_name=_useState8[0],setO_name=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),O_platform=_useState10[0],setO_platform=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),O_region=_useState12[0],setO_region=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),A_name=_useState14[0],setA_name=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),A_platform=_useState16[0],setA_platform=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),C_name=_useState18[0],setC_name=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),didO=_useState20[0],setset_didO=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),didA=_useState22[0],setset_didA=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),didC=_useState24[0],setset_didC=_useState24[1];useEffect(function(){database.collection('USERS').where('name','==',name).get().then(function(snapshot){snapshot.forEach(function(doc){var data=doc.data();setgame1(data.game1);setgame2(data.game2);setgame3(data.game3);setO_name(data.overwatch);setO_platform(data.overwatchPlatform);setO_region(data.overwatchRegion);setA_name(data.apexLegends);setA_platform(data.apexLegendsPlatform);setC_name(data.chess);});}).catch(function(error){return console.log(error);});},[]);if(O_name.localeCompare(\"none\")==0){document.getElementById(\"overwatchDisplay\").style.visibility=\"hidden\";}if(A_name.localeCompare(\"none\")==0){document.getElementById(\"apexDisplay\").style.visibility=\"hidden\";}// if (chessName.localeCompare(\"none\") == 0) {\n//     document.getElementById(\"chessDisplay\").style.visibility = \"hidden\";\n// }\nvar O_url='https://owapi.io/stats/'+O_platform+'/'+O_region+'/'+O_name;var A_url='https://api.mozambiquehe.re/bridge?version=5&platform='+A_platform+'&player='+A_name+'&auth=7ThP0bUtZjYnDtJYz4uf';var C_url='https://api.chess.com/pub/player/'+C_name+'/stats';// var C_url = 'https://api.chess.com/pub/player/cnewby5283/stats';\nconsole.log(C_url);// console.log(O_url)\nvar request_O=new XMLHttpRequest();var request_A=new XMLHttpRequest();var request_C=new XMLHttpRequest();// API queries\nrequest_O.open('GET',O_url,true);request_A.open('GET',A_url,true);request_C.open('GET',C_url,true);// potential API queries\n// request.open('GET', 'https://api.clashroyale.com/v1/players/%239CCUURQVJ', true);\n// request.setRequestHeader(\"authorization\",\"Bearer [api key for specific IP]\");\nconsole.log('got queries');if(O_name.localeCompare(\"\")!=0&&O_platform.localeCompare(\"\")!=0&&O_region.localeCompare(\"\")!=0){console.log(\"O_url: \",O_url);request_O.onload=function(){var data=JSON.parse(this.response);var data=JSON.parse(this.response);if(request_O.status>=200&&request_O.status<400){if(data.stats.top_heroes.competitive.played.length>0){O_mostPlayed=\"Most Played: \"+data.stats.top_heroes.competitive.played[0].hero+\", \"+data.stats.top_heroes.competitive.played[1].hero+\", \"+data.stats.top_heroes.competitive.played[2].hero;}else{O_mostPlayed='This player has not played this season! <br/> Stats for overwatch are only displayed for the current season!';}if(data.stats.game.competitive.length>0){O_winRatio=\"Win Ratio: \"+(parseInt(data.stats.game.competitive[3].value)/parseInt(data.stats.game.competitive[1].value)).toFixed(3);}else{O_winRatio=\"\";}if(data.stats.combat.competitive.length>0){O_compED=\"Competitive Elims/Deaths: \"+(parseInt(data.stats.combat.competitive[4].value)/parseInt(data.stats.combat.competitive[3].value)).toFixed(3);}else{O_compED=\"\";}if(data.stats.average.competitive.length>0){O_avgE=\"Avg. Eims / 10 Minutes: \"+data.stats.average.competitive[3].value;}else{O_avgE=\"\";}document.getElementById(\"O_1\").innerHTML=O_mostPlayed;document.getElementById(\"O_2\").innerHTML=O_winRatio;document.getElementById(\"O_3\").innerHTML=O_compED;document.getElementById(\"O_4\").innerHTML=O_avgE;}else{return/*#__PURE__*/_jsx(\"marquee\",{children:\"API Request Failed\"});}// didO = true;\n};request_O.send();}if(A_name.localeCompare(\"\")!=0&&A_platform.localeCompare(\"\")!=0){console.log(\"A_url: \",A_url);request_A.onload=function(){var data=JSON.parse(this.response);var data=JSON.parse(this.response);if(request_A.status>=200&&request_A.status<400){A_compRank=\"Competitive Rank : \"+data.global.rank.rankName+\" -- \"+data.global.rank.rankScore;A_arenaRank=\"Arena Rank : \"+data.global.arena.rankName+\" -- \"+data.global.arena.rankScore;A_level=\"Level : \"+data.global.level;A_kills=\"Kills : \"+data.total.kills.value;document.getElementById(\"A_1\").innerHTML=A_compRank;document.getElementById(\"A_2\").innerHTML=A_arenaRank;document.getElementById(\"A_3\").innerHTML=A_level;document.getElementById(\"A_4\").innerHTML=A_kills;}else{return/*#__PURE__*/_jsx(\"marquee\",{children:\"API Request Failed\"});}// didA = true;\n};request_A.send();}if(C_name.localeCompare(\"\")!=0){console.log(\"C_url: \",C_url);request_C.onload=function(){// console.log(\"test chess query below 1\");\nvar data=JSON.parse(this.response);if(request_C.status>=200&&request_C.status<400){C_wins=\"Wins : \"+data.chess_blitz.record.win;C_losses=\"Losses : \"+data.chess_blitz.record.loss;C_winRate=\"Win rate (Win/Loss): \"+(parseInt(data.chess_blitz.record.win)/parseInt(data.chess_blitz.record.loss)).toFixed(3);document.getElementById(\"C_1\").innerHTML=C_wins;document.getElementById(\"C_2\").innerHTML=C_losses;document.getElementById(\"C_3\").innerHTML=C_winRate;}else{return/*#__PURE__*/_jsx(\"marquee\",{children:\"API Request Failed\"});}// didC = true;\n};request_C.send();}return/*#__PURE__*/_jsx(\"div\",{className:\"wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"apiDisplays\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"nameDisplay\",children:[/*#__PURE__*/_jsx(\"br\",{}),\"Meet \",name,\"!\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"gamesPlayedDisplay\",children:[name,\" plays these games: \",/*#__PURE__*/_jsx(\"br\",{}),game1,\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",game2,\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",game3,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"apiDisplay\",children:[\"Avaliable stats for \",name,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"overwatchDisplay\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"header1\",children:[\"Overwatch Stats: \",O_name]}),/*#__PURE__*/_jsx(\"p\",{id:\"O_1\",children:\"None\"}),/*#__PURE__*/_jsx(\"p\",{id:\"O_2\",children:\"None\"}),/*#__PURE__*/_jsx(\"p\",{id:\"O_3\",children:\"None\"}),/*#__PURE__*/_jsx(\"p\",{id:\"O_4\",children:\"None\"})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"apexDisplay\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"header1\",children:[\"Apex Stats: \",A_name]}),/*#__PURE__*/_jsx(\"p\",{id:\"A_1\",children:\"None\"}),/*#__PURE__*/_jsx(\"p\",{id:\"A_2\",children:\"None\"}),/*#__PURE__*/_jsx(\"p\",{id:\"A_3\",children:\"None\"}),/*#__PURE__*/_jsx(\"p\",{id:\"A_4\",children:\"None\"})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"chessDisplay\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"header1\",children:[\"Chess.com Stats: \",C_name]}),/*#__PURE__*/_jsx(\"p\",{id:\"C_1\",children:\"None\"}),/*#__PURE__*/_jsx(\"p\",{id:\"C_2\",children:\"None\"}),/*#__PURE__*/_jsx(\"p\",{id:\"C_3\",children:\"None\"})]})]})});}export default Statsview;","map":{"version":3,"sources":["/Users/shanebrown/CSCE315/Project3_Juego/juego/juego/src/Statsview.js"],"names":["React","useState","useEffect","useMemo","useRef","database","PersonIcon","ForumIcon","IconButton","ArrowBackIosIcon","Link","useHistory","useParams","People","console","log","O_mostPlayed","O_winRatio","O_compED","O_avgE","A_compRank","A_arenaRank","A_level","A_kills","C_wins","C_losses","C_winRate","Statsview","backButton","urlParams","URLSearchParams","window","location","search","name","get","chessName","game1","setgame1","game2","setgame2","game3","setgame3","O_name","setO_name","O_platform","setO_platform","O_region","setO_region","A_name","setA_name","A_platform","setA_platform","C_name","setC_name","didO","setset_didO","didA","setset_didA","didC","setset_didC","collection","where","then","snapshot","forEach","doc","data","overwatch","overwatchPlatform","overwatchRegion","apexLegends","apexLegendsPlatform","chess","catch","error","localeCompare","document","getElementById","style","visibility","O_url","A_url","C_url","request_O","XMLHttpRequest","request_A","request_C","open","onload","JSON","parse","response","status","stats","top_heroes","competitive","played","length","hero","game","parseInt","value","toFixed","combat","average","innerHTML","send","global","rank","rankName","rankScore","arena","level","total","kills","chess_blitz","record","win","loss"],"mappings":"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","sourcesContent":["// import React from \"react\";\nimport React, { useState, useEffect, useMemo, useRef } from \"react\";\nimport \"./Statsview.css\";\n\nimport {database} from \"./firebase\";\n\nimport PersonIcon from '@material-ui/icons/Person';\nimport ForumIcon from \"@material-ui/icons/Forum\";\nimport IconButton  from \"@material-ui/core/IconButton\";\nimport ArrowBackIosIcon from \"@material-ui/icons/ArrowBackIos\";\nimport {Link, useHistory, useParams} from \"react-router-dom\";\nimport { People } from \"@material-ui/icons\";\n\nconsole.log('starting script');\n\n\nvar O_mostPlayed;\nvar O_winRatio;\nvar O_compED;\nvar O_avgE;\n\nvar A_compRank;\nvar A_arenaRank;\nvar A_level;\nvar A_kills;\n\nvar C_wins;\nvar C_losses;\nvar C_winRate;\n\n\nfunction Statsview( {backButton} ) {\n    // getting api info from our db\n    const urlParams = new URLSearchParams(window.location.search);\n    const name = urlParams.get('name');\n    const chessName = urlParams.get('chess');\n\n    const [game1, setgame1] = useState(\"\");\n    const [game2, setgame2] = useState(\"\");\n    const [game3, setgame3] = useState(\"\");\n\n    const [O_name, setO_name] = useState(\"\");\n    const [O_platform, setO_platform] = useState(\"\");\n    const [O_region, setO_region] = useState(\"\");\n    const [A_name, setA_name] = useState(\"\");\n    const [A_platform, setA_platform] = useState(\"\");\n    const [C_name, setC_name] = useState(\"\");\n\n    const [didO, setset_didO] = useState(false);\n    const [didA, setset_didA] = useState(false);\n    const [didC, setset_didC] = useState(false);\n\n    \n    useEffect(() => {\n        database.collection('USERS').where('name','==',name).get().then(snapshot => {\n            snapshot.forEach(doc => {\n                const data = doc.data()\n                setgame1(data.game1);\n                setgame2(data.game2);\n                setgame3(data.game3);\n                setO_name(data.overwatch);\n                setO_platform(data.overwatchPlatform);\n                setO_region(data.overwatchRegion);\n                setA_name(data.apexLegends);\n                setA_platform(data.apexLegendsPlatform);\n                setC_name(data.chess);\n            })\n        }).catch(error => console.log(error))      \n    },[]);\n\n    if (O_name.localeCompare(\"none\") == 0) {\n        document.getElementById(\"overwatchDisplay\").style.visibility = \"hidden\";\n    }\n    if (A_name.localeCompare(\"none\") == 0) {\n        document.getElementById(\"apexDisplay\").style.visibility = \"hidden\";\n    }\n    // if (chessName.localeCompare(\"none\") == 0) {\n    //     document.getElementById(\"chessDisplay\").style.visibility = \"hidden\";\n    // }\n    var O_url = 'https://owapi.io/stats/' + O_platform + '/' + O_region + '/' + O_name;\n    var A_url = 'https://api.mozambiquehe.re/bridge?version=5&platform=' + A_platform + '&player=' + A_name + '&auth=7ThP0bUtZjYnDtJYz4uf';\n    var C_url = 'https://api.chess.com/pub/player/' + C_name + '/stats';\n    // var C_url = 'https://api.chess.com/pub/player/cnewby5283/stats';\n    console.log(C_url);\n\n    // console.log(O_url)\n    var request_O = new XMLHttpRequest();\n    var request_A = new XMLHttpRequest();\n    var request_C = new XMLHttpRequest();\n    // API queries\n    request_O.open('GET', O_url, true);\n    request_A.open('GET', A_url, true);\n    request_C.open('GET', C_url, true);\n    // potential API queries\n    // request.open('GET', 'https://api.clashroyale.com/v1/players/%239CCUURQVJ', true);\n    // request.setRequestHeader(\"authorization\",\"Bearer [api key for specific IP]\");\n    console.log('got queries');\n\n    if (O_name.localeCompare(\"\") != 0 && O_platform.localeCompare(\"\") != 0 && O_region.localeCompare(\"\") != 0) {\n        console.log(\"O_url: \", O_url)\n        request_O.onload = function () {\n            var data = JSON.parse(this.response);\n            var data = JSON.parse(this.response);\n            if (request_O.status >= 200 && request_O.status < 400) {\n                if (data.stats.top_heroes.competitive.played.length > 0) {\n                    O_mostPlayed = \"Most Played: \" +  data.stats.top_heroes.competitive.played[0].hero + \", \" + data.stats.top_heroes.competitive.played[1].hero + \", \" + data.stats.top_heroes.competitive.played[2].hero;\n                }\n                else {\n                    O_mostPlayed = 'This player has not played this season! <br/> Stats for overwatch are only displayed for the current season!';\n                }\n                if (data.stats.game.competitive.length > 0) {\n                    O_winRatio = \"Win Ratio: \" +  (parseInt(data.stats.game.competitive[3].value) / parseInt(data.stats.game.competitive[1].value)).toFixed(3);\n                } else {\n                    O_winRatio = \"\";\n                }\n                if (data.stats.combat.competitive.length > 0) {\n                    O_compED = \"Competitive Elims/Deaths: \" +  (parseInt(data.stats.combat.competitive[4].value) / parseInt(data.stats.combat.competitive[3].value)).toFixed(3);\n                } else {\n                    O_compED = \"\";\n                }\n                if (data.stats.average.competitive.length > 0) {\n                    O_avgE = \"Avg. Eims / 10 Minutes: \" +  data.stats.average.competitive[3].value;\n                } else{\n                    O_avgE = \"\";\n                }\n                document.getElementById(\"O_1\").innerHTML = O_mostPlayed;\n                document.getElementById(\"O_2\").innerHTML = O_winRatio;\n                document.getElementById(\"O_3\").innerHTML = O_compED;\n                document.getElementById(\"O_4\").innerHTML = O_avgE;\n            } else {\n                return (\n                    <marquee>\n                        API Request Failed\n                    </marquee>\n                )\n            }\n            // didO = true;\n        }\n\n        request_O.send();\n    }\n    if (A_name.localeCompare(\"\") != 0 && A_platform.localeCompare(\"\") != 0) {\n        console.log(\"A_url: \", A_url)\n        request_A.onload = function () {\n            var data = JSON.parse(this.response);\n            var data = JSON.parse(this.response);\n            if (request_A.status >= 200 && request_A.status < 400) {\n                A_compRank = \"Competitive Rank : \" + data.global.rank.rankName + \" -- \" + data.global.rank.rankScore;\n                A_arenaRank = \"Arena Rank : \" + data.global.arena.rankName + \" -- \" + data.global.arena.rankScore;\n                A_level = \"Level : \" + data.global.level;\n                A_kills = \"Kills : \" + data.total.kills.value;\n                document.getElementById(\"A_1\").innerHTML = A_compRank;\n                document.getElementById(\"A_2\").innerHTML = A_arenaRank;\n                document.getElementById(\"A_3\").innerHTML = A_level;\n                document.getElementById(\"A_4\").innerHTML = A_kills;\n                \n            } else {\n                return (\n                    <marquee>\n                        API Request Failed\n                    </marquee>\n                )\n            }\n            // didA = true;\n        }\n        request_A.send();\n    }\n    if (C_name.localeCompare(\"\") != 0) {\n        console.log(\"C_url: \", C_url)\n        request_C.onload = function () {\n            // console.log(\"test chess query below 1\");\n            var data = JSON.parse(this.response);\n            if (request_C.status >= 200 && request_C.status < 400) {\n                C_wins = \"Wins : \" + data.chess_blitz.record.win;\n                C_losses = \"Losses : \" + data.chess_blitz.record.loss;\n                C_winRate = \"Win rate (Win/Loss): \" + (parseInt(data.chess_blitz.record.win) / parseInt(data.chess_blitz.record.loss)).toFixed(3);\n                document.getElementById(\"C_1\").innerHTML = C_wins;\n                document.getElementById(\"C_2\").innerHTML = C_losses;\n                document.getElementById(\"C_3\").innerHTML = C_winRate;\n                \n            } else {\n                return (\n                    <marquee>\n                        API Request Failed\n                    </marquee>\n                )\n            }\n            // didC = true;\n        }\n        \n        request_C.send();\n    }\n\n    return(\n        <div className=\"wrapper\">\n            \n            <div class=\"apiDisplays\">\n                \n            <div id=\"nameDisplay\">\n                <br/>Meet {name}!<br/><br/>\n            </div>\n            <div id=\"gamesPlayedDisplay\">\n                {/* show games */}\n                {name} plays these games: <br/>\n                {game1} <br/> {game2} <br/> {game3}\n                <br/><br/>\n            </div>\n            <div id=\"apiDisplay\">\n                {/* shows api data */}\n                Avaliable stats for {name} <br/><br/>\n            </div>\n            <div id = \"overwatchDisplay\">\n                <h1 className=\"header1\">Overwatch Stats: {O_name}</h1>\n                <p id=\"O_1\">None</p>\n                <p id=\"O_2\">None</p>\n                <p id=\"O_3\">None</p>\n                <p id=\"O_4\">None</p> \n            </div>\n            <div id = \"apexDisplay\">\n                <h1 className=\"header1\">Apex Stats: {A_name}</h1>\n                <p id=\"A_1\">None</p>\n                <p id=\"A_2\">None</p>\n                <p id=\"A_3\">None</p>\n                <p id=\"A_4\">None</p>\n            </div>\n            <div id = \"chessDisplay\">\n                <h1 className=\"header1\">Chess.com Stats: {C_name}</h1>\n                <p id=\"C_1\">None</p>\n                <p id=\"C_2\">None</p>\n                <p id=\"C_3\">None</p>\n            </div>\n        </div>\n        </div>\n        \n    )\n}\n\nexport default Statsview\n"]},"metadata":{},"sourceType":"module"}